define(['base/js/namspace', 'base/js/events'], function(Jupyter, events) {
    var insert_cell = function() {
        Jupyter.notebook.insert_cell_above('code').set_text(`# HELLO from Planet Jupyter!`);
        Jupyter.notebook.select_prev();
    }

    var planetJupyterButton = function() {
        console.log();
        Jupyter.toolbar.add_button_group([
            Jupyter.keyboard_manager.actions.register ({
                'help': 'Add planet jupyter cell',
                'icon': 'fa-paper-plane',
                'handler': insert_cell
            }, 'addplanetjupyter-cell', 'Planet Jupyter')
        ])
    }

    function load_ipyhotn_extension() {
        if(Jupyter.notebook.get_cells().length === 1){
            insert_cell();
        }
        planetJupyterButton();
    }
    return {
        load_ipyhotn_extension: load_ipyhotn_extension
    };
});